<!DOCTYPE html>
<html lang="en">
  <head>
    <title>진도</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,user-scalable=no,minimum-scale=1,minimum-scale=1"
    />
    <link rel="stylesheet" href="../css/app/new/style.css" />
  </head>
  <body class="page-service">
    <header class="gnb-sub white">
      <a href="#" class="btn-back"></a>
      <div class="header-menu">
        <a href="#" class="btn btn-lock"></a>
        <a href="#" class="btn btn-hamburger"></a>
      </div>
      <div class="side-menu">
        <div class="side-menu-header">
          <img src="../images/new/logo.png" class="logo" alt="진도" />
          <img
            src="../images/new/side-menu-logo-text.png"
            class="logo-text"
            alt="보배섬 소식통"
          />
          <a href="#" class="close btn-close"
            ><i class="icon icon-close"></i
          ></a>
        </div>
        <div class="relative">
          <ul class="first">
            <li>
              <a href="#" class="active">소통 플랫폼 소개</a>
            </li>
            <li>
              <a href="#" class="">정보 서비스</a>
            </li>
            <li>
              <a href="#" class="">신청 서비스</a>
            </li>
            <li>
              <a href="#" class="">예약 서비스</a>
            </li>
            <li>
              <a href="#" class="">편의 서비스</a>
            </li>
            <li>
              <a href="#" class="">밀착 서비스</a>
            </li>
            <li>
              <a href="#" class="">알림마당</a>
            </li>
          </ul>
          <ul class="second">
            <li class="separator">
              <a href="#"
                ><span>소통 플랫폼 소개</span>
                <i class="icon-arrow-right-large"></i
              ></a>
            </li>
            <li>
              <a href="#"
                ><span>정보 서비스 소개</span>
                <i class="icon-arrow-right-large"></i
              ></a>
            </li>
            <li>
              <a href="#">사업정보</a>
              <ul class="third">
                <li>
                  <a href="#"
                    ><span>마감임박 사업정보</span>
                    <i class="icon-arrow-right-small"></i
                  ></a>
                </li>
                <li>
                  <a href="#"
                    ><span>사업정보 확인</span>
                    <i class="icon-arrow-right-small"></i
                  ></a>
                </li>
                <li>
                  <a href="#"
                    ><span>사업정보</span> <i class="icon-arrow-right-small"></i
                  ></a>
                </li>
              </ul>
            </li>
            <li>
              <a href="#"
                ><span>공연/행사정보</span>
                <i class="icon-arrow-right-large"></i
              ></a>
            </li>
            <li>
              <a href="#"
                ><span>취업정보</span> <i class="icon-arrow-right-large"></i
              ></a>
            </li>
            <li class="separator">
              <a href="#"
                ><span>맞춤형 정보</span> <i class="icon-arrow-right-large"></i
              ></a>
            </li>
            <li>
              <a href="#"
                ><span>신청 서비스 소개</span>
                <i class="icon-arrow-right-large"></i
              ></a>
            </li>
            <li>
              <a href="#"><span>지원사업</span></a>
              <ul class="third">
                <li>
                  <a href="#"
                    ><span>신청중인 사업</span>
                    <i class="icon-arrow-right-small"></i
                  ></a>
                </li>
                <li>
                  <a href="#"
                    ><span>보조사업 정보</span>
                    <i class="icon-arrow-right-small"></i
                  ></a>
                </li>
                <li>
                  <a href="#"
                    ><span>맞춤 보조사업 찾기</span>
                    <i class="icon-arrow-right-small"></i
                  ></a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </header>

    <!-- 24.09.19 수정 필요 CSS -->
    <style>
      .content.map .map-address{
        display: flex;
        align-items: center;
        margin: 20px 20px 10px 20px;
        width: 90%;
        height: 44px;
        background-color: white;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        position: absolute;
        /* top: -80px; */
        top: 70px;
        z-index:1000;
      }
    </style>
    <!-- //24.09.19 수정 필요 CSS -->
    <style>
      .map-pointer{position:absolute;width:31px;height:37px;background:url("data:image/svg+xml,%3Csvg width='31' height='37' viewBox='0 0 31 37' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='6.26855' y='5.93579' width='18.4095' height='18.4095' rx='9.20475' fill='white'/%3E%3Cpath d='M15.1196 35.0201L15.4731 35.3737L15.8267 35.0201L25.5899 25.257C27.5907 23.2561 28.9533 20.7068 29.5054 17.9315C30.0574 15.1562 29.7741 12.2795 28.6912 9.66523C27.6083 7.05096 25.7745 4.8165 23.4217 3.24442C21.0689 1.67235 18.3028 0.833252 15.4731 0.833252C12.6435 0.833252 9.87734 1.67235 7.52455 3.24442C5.17176 4.8165 3.33798 7.05096 2.2551 9.66523C1.17223 12.2795 0.888887 15.1562 1.44092 17.9315C1.99295 20.7068 3.35555 23.2561 5.35642 25.257L15.1196 35.0201Z' fill='%23FF0000' stroke='%23EBEBEB'/%3E%3Ccircle cx='15.5' cy='15.5' r='6.5' fill='white'/%3E%3C/svg%3E%0A") center no-repeat}
      .map-pointer em{display:inline-block;padding:9px;width:31px;line-height:13px;font-size:8px;text-align:center}

      .float-wrap{position:absolute;right:20px;bottom:147px;width:73px}
      .float-wrap .btn-float{position:relative;padding:46px 0 10px;width:73px;height:73px;border-radius:50px;background-color:#fff}
      .float-wrap .btn-float + .btn-float{margin-top:20px}
      .float-wrap .btn-float:after{content:'';display:block;position:absolute;left:50%;top:10px;transform:translateX(-50%);width:30px;height:30px;background-position:center;background-repeat:no-repeat}
      .float-wrap .btn-float.memo:after{background-image:url("data:image/svg+xml,%3Csvg width='31' height='30' viewBox='0 0 31 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_127_2796)'%3E%3Cpath d='M27.9997 5.33343L24.9163 2.2501C24.6513 1.99741 24.2992 1.85645 23.933 1.85645C23.5668 1.85645 23.2147 1.99741 22.9497 2.2501L20.208 5.0001H5.49967C5.05765 5.0001 4.63372 5.17569 4.32116 5.48825C4.0086 5.80081 3.83301 6.22474 3.83301 6.66676V25.0001C3.83301 25.4421 4.0086 25.866 4.32116 26.1786C4.63372 26.4912 5.05765 26.6668 5.49967 26.6668H23.833C24.275 26.6668 24.699 26.4912 25.0115 26.1786C25.3241 25.866 25.4997 25.4421 25.4997 25.0001V9.8001L27.9997 7.3001C28.2602 7.03917 28.4066 6.6855 28.4066 6.31676C28.4066 5.94802 28.2602 5.59436 27.9997 5.33343ZM16.1913 16.7751L12.6997 17.5501L13.533 14.0918L21.4913 6.11676L24.183 8.80843L16.1913 16.7751ZM25.083 7.85843L22.3913 5.16676L23.933 3.6251L26.6247 6.31676L25.083 7.85843Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_127_2796'%3E%3Crect width='30' height='30' fill='white' transform='translate(0.5)'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E%0A")}
      .float-wrap .btn-float.picture:after{background-image:url("data:image/svg+xml,%3Csvg width='31' height='30' viewBox='0 0 31 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.5 5H9.25L11.75 2.5H19.25L21.75 5H25.5C26.163 5 26.7989 5.26339 27.2678 5.73223C27.7366 6.20107 28 6.83696 28 7.5V22.5C28 23.163 27.7366 23.7989 27.2678 24.2678C26.7989 24.7366 26.163 25 25.5 25H5.5C4.83696 25 4.20107 24.7366 3.73223 24.2678C3.26339 23.7989 3 23.163 3 22.5V7.5C3 6.83696 3.26339 6.20107 3.73223 5.73223C4.20107 5.26339 4.83696 5 5.5 5ZM15.5 8.75C13.8424 8.75 12.2527 9.40848 11.0806 10.5806C9.90848 11.7527 9.25 13.3424 9.25 15C9.25 16.6576 9.90848 18.2473 11.0806 19.4194C12.2527 20.5915 13.8424 21.25 15.5 21.25C17.1576 21.25 18.7473 20.5915 19.9194 19.4194C21.0915 18.2473 21.75 16.6576 21.75 15C21.75 13.3424 21.0915 11.7527 19.9194 10.5806C18.7473 9.40848 17.1576 8.75 15.5 8.75ZM15.5 11.25C16.4946 11.25 17.4484 11.6451 18.1517 12.3483C18.8549 13.0516 19.25 14.0054 19.25 15C19.25 15.9946 18.8549 16.9484 18.1517 17.6517C17.4484 18.3549 16.4946 18.75 15.5 18.75C14.5054 18.75 13.5516 18.3549 12.8483 17.6517C12.1451 16.9484 11.75 15.9946 11.75 15C11.75 14.0054 12.1451 13.0516 12.8483 12.3483C13.5516 11.6451 14.5054 11.25 15.5 11.25Z' fill='black'/%3E%3C/svg%3E%0A")}
      .float-wrap .btn-float span{display:block;height:17px;line-height:17px;font-size:15px;font-weight:400}

      .map-util{position:absolute;left:20px;top:154px;width:88.88vw}
      .map-util .point-spread{position:relative;padding:9px 40px 9px 20px;border-radius:30px;width:58.88vw;height:30px;line-height:12px;font-size:10px;font-weight:400;background-color:rgba(255,255,255,.95);text-align:left}
      .map-util .point-spread:after{content:'';display:block;position:absolute;right:20px;top:11px;width:12px;height:8px;background:url("data:image/svg+xml,%3Csvg width='8' height='6' viewBox='0 0 8 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3.24407 0.872872C3.64284 0.41241 4.35716 0.41241 4.75593 0.872872L7.76318 4.34535C8.32406 4.99299 7.864 6 7.00725 6H0.992749C0.135997 6 -0.324056 4.99299 0.23682 4.34535L3.24407 0.872872Z' fill='black'/%3E%3C/svg%3E%0A") center no-repeat}
      .map-util .point-spread.open:after{background-image: url("data:image/svg+xml,%3Csvg width='8' height='6' viewBox='0 0 8 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.75593 5.12713C4.35716 5.58759 3.64284 5.58759 3.24407 5.12713L0.23682 1.65465C-0.324056 1.00701 0.135997 0 0.992749 0L7.00725 0C7.864 0 8.32406 1.00701 7.76318 1.65465L4.75593 5.12713Z' fill='black'/%3E%3C/svg%3E%0A")}
      .map-util .point-spread.open + .point-list{opacity:1}
      .map-util .point-list{margin-top:4px;opacity:0;transition:opacity 1s}
      .map-util .point-list li{display:flex;padding:7px 10px;border-radius:30px;min-width:58.88vw;width:max-content;max-width:88.88vw;min-height:30px;background-color:rgba(255,255,255,.95);text-align:left;align-items:center}
      .map-util .point-list li + li{margin-top:4px}
      .map-util .point-list li em{display:inline-block;margin-right:4px;width:16px;height:16px;border:2px solid #000;border-radius:50px;line-height:12px;font-size:8px;font-weight:400;text-align:center}
      .map-util .point-list li span{display:inline-block;padding:3px 0;margin-right:4px;width:52px;height:16px;line-height:10px;font-size:9px;font-weight:400;text-align:center}
      .map-util .point-list li p{display:inline-block;padding:3px 7px;width:max-content;max-width:56.38vw;line-height:10px;font-size:9px;font-weight:400;text-align:left}
      .map-util .point-list li .btn-del-sm{margin-left:4px;width:16px;height:16px;background:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_509_3433)'%3E%3Crect width='16' height='16' fill='white'/%3E%3Cpath d='M8 16C5.87827 16 3.84344 15.1571 2.34315 13.6569C0.842855 12.1566 0 10.1217 0 8C0 5.87827 0.842855 3.84344 2.34315 2.34315C3.84344 0.842855 5.87827 0 8 0C10.1217 0 12.1566 0.842855 13.6569 2.34315C15.1571 3.84344 16 5.87827 16 8C16 10.1217 15.1571 12.1566 13.6569 13.6569C12.1566 15.1571 10.1217 16 8 16ZM12 7.2H4V8.8H12V7.2Z' fill='%23FF0000'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_509_3433'%3E%3Crect width='16' height='16' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E%0A") center no-repeat;cursor:pointer}
    </style>

    <div class="content map">
      <button id="open-bottom-sheet"></button>
      <div id="dim-overlay"></div>

      <!-- 24.09.19 김래경 map-address 위치 변경 -->
      <!-- #bottom-sheet 밖으로 빠져야 바텀시트가 감춰졌을 때 주소 노출 가능 -->
      <div class="map-address">
        <span>전남 진도군 의신면 거룡리 520-7 마을회관</span>
      </div>
      <!-- //24.09.19 김래경 map-address 위치 변경 -->

      <!-- 24.09.19 김래경 지도 내 포인트 아이콘 -->
      <p class="map-pointer" style="left:50%;top:50%">
        <em>1</em>
      </p>
      <p class="map-pointer" style="left:30%;top:70%">
        <em>2</em>
      </p>
      <!-- //24.09.19 김래경 지도 내 포인트 아이콘 -->
      
      <!-- 24.09.19 김래경 플로팅 버튼 -->
      <div class="float-wrap">
        <button type="button" class="btn-float memo"><span>메모</span></button>
        <button type="button" class="btn-float picture"><span>현장사진</span></button>
      </div>
      <!-- //24.09.19 김래경 플로팅 버튼 -->

      <!-- 24.09.19 김래경 추가 영역 -->
      <div class="map-util">
        <button type="button" class="point-spread">포인트 펼쳐보기</button>
        <ul class="point-list">
          <li>
            <!-- 등록된 포인트가 없을 경우 -->
            <p>등록된 포인트가 없습니다.</p>
          </li>
          <li>
            <em>1</em>
            <span>2024.09.10</span>
            <p>건물 외곽 오른쪽 토사 쌓임</p>
            <button type="button" class="btn-del-sm"></button>
          </li>
          <li>
            <em>2</em>
            <span>2024.09.10</span>
            <p>포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트포인트</p>
            <button type="button" class="btn-del-sm"></button>
          </li>
        </ul>
        <!-- //24.09.19 김래경 추가 영역 -->

      </div>
      <div id="bottom-sheet">
        <!-- 24.09.19 김래경 map-address 위치 변경
        <div class="map-address">
          <span>전남 진도군 의신면 거룡리 520-7 마을회관</span>
        </div>
        -->
        <div class="map-bottom-area">
          <div class="sheet-content">
            <button id="close-bottom-sheet">Close</button>
          </div>
          <div class="map-bottom-area-inner">
            <!--data 없을경우
            <div class="nodata">새로운 이벤트를 생성해주세요.</div>-->
            <div class="cont-tit">아래 이벤트 중 하나를 선택해주세요</div>
            <div class="radio-wrap">
              <div class="radio-box">
                <input
                  type="radio"
                  id="option1"
                  name="option"
                  value="option1"
                  checked
                />
                <label for="option1">전체(5)</label>
              </div>

              <div class="radio-box">
                <input
                  type="radio"
                  id="option2"
                  name="option"
                  value="option2"
                />
                <label for="option2">출장(3)</label>
              </div>

              <div class="radio-box">
                <input
                  type="radio"
                  id="option3"
                  name="option"
                  value="option3"
                />
                <label for="option3">민원(2)</label>
              </div>
            </div>
            <div class="radio-cont">
              <ul>
                <li>
                  <div>출장</div>
                  <div class="date"><span>2024-09-05</span></div>
                  <div>피해조사</div>
                  <div class="toggle-wrap">
                    <input type="checkbox" id="toggle" class="toggle-button" />
                  </div>
                </li>
                <li>
                  <div>민원</div>
                  <div class="date"><span>2024-09-05</span></div>
                  <div>피해조사</div>
                  <div class="toggle-wrap">
                    <input type="checkbox" id="toggle" class="toggle-button" />
                  </div>
                </li>
                <li>
                  <div>출장</div>
                  <div class="date"><span>2024-09-05</span></div>
                  <div>피해조사</div>
                  <div class="toggle-wrap">
                    <div id="tost_message">
                      처리상태가 “완료”로 변경되었습니다.
                    </div>
                    <!-- <button id="tost_btn" type="button"></button> -->
                    <input type="checkbox" id="toggle" class="toggle-button" />
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="add_event_btn_wrap">
            <button type="button" class="add_event_btn">
              새로운 이벤트 생성
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="../js/new/jquery-3.7.1.min.js"></script>
    <script src="../js/new/script.js"></script>
    <script>
      const toggle = document.getElementById("toggle");
      toggle.addEventListener("change", function () {
        if (this.checked) {
          console.log("The switch is ON");
        } else {
          console.log("The switch is OFF");
        }
      });
      //1. 토스트 메시지, 버튼요소를 변수에 대입
      let tostMessage = document.getElementById("tost_message");
      //   let tostBtn = document.getElementById("tost_btn");

      //2. 토스트 메시지 노출-사라짐 함수 작성
      function tostOn() {
        tostMessage.classList.add("active");
        setTimeout(function () {
          tostMessage.classList.remove("active");
        }, 5000);
      }

      //3. 토스트 버튼에 이벤트 연결
      toggle.addEventListener("click", function () {
        console.log("이벤트가 잘 연결 됐는지 확인");
        tostOn();
      });

      $(document).ready(function () {
        // Open the bottom sheet
        $("#open-bottom-sheet").click(function () {
          $("#bottom-sheet").css("bottom", "0");
        });
        // Close the bottom sheet
        $("#close-bottom-sheet").click(function () {
          $("#bottom-sheet").css("bottom", "10%");
        });
        $("#open-bottom-sheet").click(function () {
          $("#bottom-sheet").css("bottom", "0");
          $("#dim-overlay").css({
            opacity: "1",
            visibility: "visible",
          });
        });

        // Bottom sheet 닫기 함수
        function closeBottomSheet() {
          $("#bottom-sheet").css("bottom", "-100%");
          $("#dim-overlay").css({
            opacity: "0",
            visibility: "hidden",
          });
        }

        // 닫기 버튼으로 닫기
        $("#close-bottom-sheet").click(function () {
          closeBottomSheet();
        });

        // dim 영역을 클릭하여 닫기
        $("#dim-overlay").click(function () {
          closeBottomSheet();
        });

        // 포인트 펼쳐보기 추가
        $(".point-spread").click(function () {
          if($(".point-spread").hasClass("open") === true){
            $(".point-spread").removeClass("open");
          }else{
            $(".point-spread").addClass("open");
          }
        });
      });
      $(document).ready(function () {
        let startY = 0;
        let currentY = 0;
        let isDragging = false;

        // Open the bottom sheet
        $("#open-bottom-sheet").click(function () {
          $("#bottom-sheet").css("bottom", "0");
        });

        // Close the bottom sheet
        $("#close-bottom-sheet").click(function () {
          $("#bottom-sheet").css("bottom", "-100%");
        });
        $("#close-bottom-sheet").click(function () {
          $("#bottom-sheet").css("bottom", "-100%");
        });

        // Touch start event
        $("#bottom-sheet").on("touchstart", function (e) {
          startY = e.originalEvent.touches[0].clientY;
          isDragging = true;
        });

        // Touch move event
        $("#bottom-sheet").on("touchmove", function (e) {
          if (!isDragging) return;

          currentY = e.originalEvent.touches[0].clientY;
          let diffY = currentY - startY;

          // Only move the sheet downwards
          if (diffY > 0) {
            $(this).css("bottom", `-${diffY}px`);
          }
        });

        // Touch end event
        $("#bottom-sheet").on("touchend", function (e) {
          isDragging = false;

          let diffY = currentY - startY;

          // If dragged more than 100px down, close the bottom sheet
          if (diffY > 100) {
            $("#bottom-sheet").css("bottom", "-100%");
          } else {
            // If not enough drag, reset to initial position
            $("#bottom-sheet").css("bottom", "0");
          }
        });
      });
    </script>
  </body>
</html>
